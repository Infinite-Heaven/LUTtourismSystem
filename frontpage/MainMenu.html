<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智慧旅游管理与调度系统</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Microsoft YaHei', Arial, sans-serif;
      /*background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);*/
      background-image: url("wangbujianwang.jpg");
      background-size: cover;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      min-height: 100vh;
      color: #e0e0e0;
      background-attachment: fixed;
    }

    .header {
      background: rgba(16, 42, 67, 0.7);
      backdrop-filter: blur(10px);
      color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 20px rgba(0,0,0,0.3);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .header h1 {
      font-size: 2rem;
      text-align: center;
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
      letter-spacing: 1px;
    }

    .container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .card {
      background: rgba(30, 40, 50, 0.4);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(79, 195, 247, 0.3);
    }

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(79, 195, 247, 0.3);
    }

    .card-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(45deg, #4fc3f7, #29b6f6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-size: 1.2rem;
      color: white;
      box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    }

    .card-title {
      font-size: 1.3rem;
      font-weight: bold;
      color: #ffffff;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .info-item {
      background: rgba(25, 35, 45, 0.5);
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid #4fc3f7;
      transition: transform 0.3s ease;
    }

    .info-item:hover {
      transform: translateX(5px);
    }

    .info-label {
      font-size: 0.9rem;
      color: #b0bec5;
      margin-bottom: 0.3rem;
    }

    .info-value {
      font-size: 1.1rem;
      font-weight: bold;
      color: #ffffff;
    }

    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.5rem;
      box-shadow: 0 0 5px currentColor;
    }

    .status-normal { background-color: #4caf50; }
    .status-warning { background-color: #ff9800; }
    .status-danger { background-color: #f44336; }

    .map-container {
      height: 300px;
      background: rgba(25, 35, 45, 0.5);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #b0bec5;
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(79, 195, 247, 0.2);
    }

    .map-overlay {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(16, 42, 67, 0.8);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      font-size: 0.9rem;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .emergency-panel {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
      color: white;
      border: 1px solid rgba(255, 100, 100, 0.3);
    }

    .emergency-panel .card-header {
      border-bottom-color: rgba(255, 255, 255, 0.3);
    }

    .emergency-panel .card-title {
      color: white;
    }

    .emergency-panel .info-item {
      background: rgba(192, 57, 43, 0.5);
      border-left-color: #ffeb3b;
    }

    .emergency-panel .info-label {
      color: #ffeb3b;
    }

    .emergency-panel .info-value {
      color: white;
    }

    .navigation-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 2rem;
    }

    .nav-button {
      display: inline-block;          /* 让 <a> 也能撑开尺寸 */
      text-align: center;
      text-decoration: none;          /* 去掉下划线 */
      line-height: 1.2;               /* 垂直居中 */
      background: linear-gradient(45deg, rgba(25, 118, 210, 0.7), rgba(21, 101, 192, 0.7));
      color: white;
      border: none;
      padding: 1.2rem;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    .nav-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
      background: linear-gradient(45deg,rgba(33, 150, 243, 0.8), rgba(25, 118, 210, 0.8));
    }

    .real-time-data{
      display: flex;
      justify-content: space-between;
      align-items: center;
      backgroud:rgba(25,35,45, 0.5);
      padding: 1rem;
      boader-radius: 8px;
      margin-top: 1rem;
      border: 1px solid rgba(79, 195, 247, 0.2);
    }

    .data-item{
      text-align: center;
    }

    .data-number {
      font-size: 2rem;
      font-weight: bold;
      color: #4fc3f7;
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    }

    .data-label {
      font-size: 0.9rem;
      color: #b0bec5;
      margin-top: 0.3rem
    }

    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      .navigation-buttons {
        grid-template-columns: repeat(2, 1fr);
      }
      .info-grid {
        grid-template-columns: 1fr;
      }
    }
    <img src="wangbujianwang.jpg" height="429" width="864"/><img src="wangbujianwang.jpg" height="429" width="864"/></style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>


<body>
<div class="container">
  <div class="dashboard-grid">
    <!-- 景区基础信息 -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon"></div>
        <div class="card-title">景区基础信息</div>
      </div>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">景区名称</div>
          <div class="info-value">黄山风景区</div>
        </div>
        <div class="info-item">
          <div class="info-label">最大客流量</div>
          <div class="info-value">50,000 人/天</div>
        </div>
        <div class="info-item">
          <div class="info-label">停车位总数</div>
          <div class="info-value">2,800 个</div>
        </div>
        <div class="info-item">
          <div class="info-label">景区等级</div>
          <div class="info-value">AAAAA级</div>
        </div>
      </div>
    </div>

    <!-- 管理人员信息 -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon"></div>
        <div class="card-title">景区管理人员</div>
      </div>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">总管理人员</div>
          <div class="info-value">186 人</div>
        </div>
        <div class="info-item">
          <div class="info-label">在岗人员</div>
          <div class="info-value">
            <span class="status-indicator status-normal"></span>142 人
          </div>
        </div>
        <div class="info-item">
          <div class="info-label">安保人员</div>
          <div class="info-value">68 人</div>
        </div>
        <div class="info-item">
          <div class="info-label">客服人员</div>
          <div class="info-value">45 人</div>
        </div>
      </div>
    </div>

    <!-- 实时数据监控 -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon"></div>
        <div class="card-title">实时数据监控</div>
      </div>
      <div class="real-time-data">
        <div class="data-item">
          <div class="data-number" id = "tourist" >23,847</div>
          <div class="data-label">当前游客数量</div>
        </div>
      </div>


      <!--                    <div class="real-time-data" id="touristPanel">-->
      <!--                        <div class="data-item">-->
      <!--                            <div class="data-number" id="touristCount">&#45;&#45;</div>-->
      <!--                            <div class="data-label">当前游客数量</div>-->
      <!--                        </div>-->
      <!--                    </div>-->

      <!--                    <script>-->
      <!--                        // 后端接口（已换成你的地址）-->
      <!--                        const TOURIST_API = 'http://localhost:8080/Tourists/CurrentCapacity';-->

      <!--                        async function loadTourist() {-->
      <!--                            try {-->
      <!--                                const res = await fetch(TOURIST_API);-->
      <!--                                const data = await res.json();          // 假设返回 { CurrentCapacity: 23847 }-->
      <!--                                const count = data.CurrentCapacity ?? 0;-->
      <!--                                document.getElementById('touristCount').textContent = count.toLocaleString();-->
      <!--                            } catch (e) {-->
      <!--                                console.error('获取游客数量失败', e);-->
      <!--                                document.getElementById('touristCount').textContent = '加载失败';-->
      <!--                            }-->
      <!--                        }-->

      <!--                        // 首次加载 + 每 30 秒更新-->
      <!--                        loadTourist();-->
      <!--                        setInterval(loadTourist, 30000);-->
      <!--                    </script>-->
<!--      <div class="data-number">1,256</div>-->
<!--      <div class="data-label">空余停车位</div>-->

      <div class="real-time-data">
        <div class="data-item">
          <div class="data-number" id = "cars" >1,256</div>
          <div class="data-label">当前剩余停车位数量</div>
        </div>
      </div>


    </div>
  </div>
  <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(25, 35, 45, 0.5); border-radius: 8px; text-align: center;">
    <span class="status-indicator status-warning"></span>
    <span style="color: #ffeb3b; font-weight: bold;">客流量接近预警值，请注意疏导</span>
  </div>
</div>

<!-- 景区电子地图 -->
<div class="card">
  <div class="card-header">
    <div class="card-icon"></div>
    <div class="card-title">景区电子地图</div>
  </div>
  <div class="map-container">
    <div> 景区电子地图加载中...</div>
    <div class="map-overlay">
      当前位置：黄山风景区南门
    </div>
  </div>
  <div class="info-grid" style="margin-top: 1rem;">
    <div class="info-item">
      <div class="info-label">经度</div>
      <div class="info-value">118.1678°E</div>
    </div>
    <div class="info-item">
      <div class="info-label">纬度</div>
      <div class="info-value">30.1446°N</div>
    </div>
  </div>
</div>

<!-- 应急救援信息 -->
<div class="card emergency-panel">
  <div class="card-header">
    <div class="card-icon"></div>
    <div class="card-title">应急救援信息</div>
  </div>
  <div class="info-grid">
    <div class="info-item">
      <div class="info-label">救援人员</div>
      <div class="info-value">32 人</div>
    </div>
    <div class="info-item">
      <div class="info-label">救护车</div>
      <div class="info-value">4 辆</div>
    </div>
    <div class="info-item">
      <div class="info-
label">应急电话</div>
      <div class="info-
value">0559-5561111</div>
    </div>
  </div>
</div>
<!-- 系统状态 -->
<div class="card">
  <div class="card-header">
    <div class="card-
icon">4</div>
    <div class="card-
title">系统运行状态</div>
  </div>
  <div class="info-grid">
    <div class="info-item">
      <div class="info-
label">服务器状态</div>
      <div class="info-
value">
<span
        class="status-indicator status-normal"></span>正常运行
      </div>
    </div>
    <div class="info-item">
      <div class="info-
label">数据更新</div>
      <div class="info-
value">实时同步</div>
    </div>
    <div class="info-item">
      <div class="info-
label">网络连接</div>
      <div class="info-
value">
<span
        class="status-indicator status-normal"></span>稳定
      </div>
    </div>
    <div class="info-item">
      <div class="info-
label">最后更新</div>
      <div class="infc
value">刚刚</div>
    </div>
  </div>
</div>
</div>
<!-- 导航按钮 -->
<div class="navigation-buttons">
  <!--                <button class="nav-button"-->
  <!--                        onclick="navigateTo('HotelManagement.html')">酒店管理</button>-->
  <a href="HotelManagement.html" class="nav-button">酒店管理</a>
  <!--                    <button class="nav-button"-->
  <!--                            onclick="navigateTo('traffic')">管理</button>-->
<!--  <a href="Departments%20and%20vechicies.html" class="nav-button">旅行社及车辆管控</a>-->
  <!--                        <button class="nav-button"-->
  <!--                                onclick="navigateTo('security')">'监控</button>-->
  <a href="Guides.html" class="nav-button">导游管理</a>
  <!--                            <button class="nav-button"-->
  <!--                                    onclick="navigateTo('analysis')">~1分析</button>-->
  <a href="CatiousSystem.html" class="nav-button">告警设定中心</a>
  <!--                                <button class="nav-button"onclick="navigateTo('emergency')">急响应</button>-->
  <a href="TouristsBack.html" class="nav-button">游客投诉中心</a>
  <!--                                    <button class="nav-button"-->
  <!--                                            onclick="navigateTo('settings')"> 系统设置</button>-->
  <a href="CompanyBelieve.html" class="nav-button">企业诚信档案管理</a>
</div> -
</div>
<script>
  //模拟实时数据更新
  function updateRealTimeData() {
    const touristElement = document.querySelector('.data-number');
    const parkingElement = document.querySelectorAll('.data-number')[1];
    // 模拟游客数量变化
    let currentTourists = parseInt(touristElement.textContent.replace(',', ''));
    let currentParking = parseInt(parkingElement.textContent.replace(',', ''));

    // 随机增减
    currentTourists += Math.floor(Math.random() * 21) - 10;
    currentParking += Math.floor(Math.random() * 11) - 5;

    // 确保数值在合理范围内
    currentTourists = Math.max(0, Math.min(50000, currentTourists));
    currentParking = Math.max(0, Math.min(2800, currentParking));

    touristElement.textContent = currentTourists.toLocaleString();
    parkingElement.textContent = currentParking.toLocaleString();

    // 更新状态指示器
    const statusIndicator = document.querySelector('.status-indicator');
    if (currentTourists > 40000) {
      statusIndicator.className = 'status-indicator status-danger';
    } else if (currentTourists > 35000) {
      statusIndicator.className = 'status-indicator status-warning';
    } else {
      statusIndicator.className = 'status-indicator status-normal';
    }
  }

  // 导航函数
  function navigateTo(page) {
    console.log(`导航到: ${page}`);
    // 这里可以添加实际的页面跳转逻辑
    alert(`正在跳转到${page}页面...`);
  }

  // 从后端获取景区当前人数
  function loadTouristCount() {
    $.ajax({
      type: "GET",
      url: "http://localhost:8080/tourist/1",
      dataType: "json",
      success: function(response) {
        console.log('获取到的景区数据:', response);
        // jQuery 的 dataType:"json" 已经自动解析了 JSON，response 已经是对象
        // 尝试不同的属性名（因为 Jackson 可能将 CurrentCapacity 转换为 currentCapacity）
        let currentCapacity = response.CurrentCapacity || response.currentCapacity;

        if (currentCapacity !== undefined && currentCapacity !== null) {
          // 格式化数字，添加千位分隔符
          const formattedCount = parseInt(currentCapacity).toLocaleString();
          document.getElementById("tourist").innerHTML = formattedCount;
          console.log('成功更新游客数量:', formattedCount);
        } else {
          console.error('响应数据中没有找到当前人数属性:', response);
          console.log('可用的属性:', Object.keys(response));
        }
      },
      error: function(xhr, status, error) {
        console.error('获取景区数据失败:', error);
        console.error('状态码:', xhr.status);
        console.error('响应内容:', xhr.responseText);
        // 如果请求失败，可以显示默认值或错误提示
        document.getElementById("tourist").innerHTML = '--';
      }
    });
  }

  function loadCarsCount() {
    $.ajax({
      type: "GET",
      url: "http://localhost:8080/tourist/1",
      dataType: "json",
      success: function(response) {
        console.log('获取到的车辆数据:', response);
        // jQuery 的 dataType:"json" 已经自动解析了 JSON，response 已经是对象
        // 尝试不同的属性名（因为 Jackson 可能将 CurrentCapacity 转换为 currentCapacity）
        let parkingRemaining = response.ParkingRemaining || response.parkingRemaining;

        if (parkingRemaining !== undefined && parkingRemaining !== null) {
          // 格式化数字，添加千位分隔符
          const formattedCount = parseInt(parkingRemaining).toLocaleString();
          document.getElementById("cars").innerHTML = formattedCount;
          console.log('成功更新游客数量:', formattedCount);
        } else {
          console.error('响应数据中没有找到当前车辆属性:', response);
          console.log('可用的属性:', Object.keys(response));
        }
      },
      error: function(xhr, status, error) {
        console.error('获取景区数据失败:', error);
        console.error('状态码:', xhr.status);
        console.error('响应内容:', xhr.responseText);
        // 如果请求失败，可以显示默认值或错误提示
        document.getElementById("cars").innerHTML = '--';
      }
    });
  }

  loadCarsCount();
  setInterval(loadTouristCount, 5000);


  // 定时更新数据（模拟数据更新，但优先使用真实数据）
  // setInterval(updateRealTimeData, 5000);

  // 页面加载完成后的初始化
  document.addEventListener('DOMContentLoaded', function() {
    console.log('智慧旅游管理与调度系统已加载');

    // 加载景区当前人数
    loadTouristCount();
    // 定时刷新景区人数（每5秒）
    setInterval(loadTouristCount, 5000);

    // 添加一些交互效果
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
      });

      card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
      });
    });
  });
</script>
</body>
</html>