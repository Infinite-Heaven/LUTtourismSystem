<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ˜Ÿçº§é¥­åº—ç»¼åˆç®¡ç†å¹³å°</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Microsoft YaHei', Arial, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #2c3e50, #4a235a);
      min-height: 100vh;
      color: #e0e0e0;
      background-attachment: fixed;
    }

    .header {
      background: rgba(26, 42, 108, 0.7);
      backdrop-filter: blur(10px);
      color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 20px rgba(0,0,0,0.3);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .header h1 {
      font-size: 2rem;
      text-align: center;
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
      letter-spacing: 1px;
    }

    .container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .card {
      background: rgba(30, 40, 50, 0.4);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(79, 195, 247, 0.3);
    }

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(79, 195, 247, 0.3);
    }

    .card-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(45deg, #4fc3f7, #29b6f6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-size: 1.2rem;
      color: white;
      box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    }

    .card-title {
      font-size: 1.3rem;
      font-weight: bold;
      color: #ffffff;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .info-item {
      background: rgba(25, 35, 45, 0.5);
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid #4fc3f7;
      transition: transform 0.3s ease;
    }

    .info-item:hover {
      transform: translateX(5px);
    }

    .info-label {
      font-size: 0.9rem;
      color: #b0bec5;
      margin-bottom: 0.3rem;
    }

    .info-value {
      font-size: 1.1rem;
      font-weight: bold;
      color: #ffffff;
    }

    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.5rem;
      box-shadow: 0 0 5px currentColor;
    }

    .status-normal { background-color: #4caf50; }
    .status-warning { background-color: #ff9800; }
    .status-danger { background-color: #f44336; }

    .real-time-data {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(25, 35, 45, 0.5);
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      border: 1px solid rgba(79, 195, 247, 0.2);
    }
    .data-item {
      text-align: center;
    }

    .data-number {
      font-size: 2rem;
      font-weight: bold;
      color: #4fc3f7;
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    }

    .data-label {
      font-size: 0.9rem;
      color: #b0bec5;
      margin-top: 0.3rem;
    }

    .manager-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: rgba(25, 35, 45, 0.5);
      border-radius: 8px;
      overflow: hidden;
    }

    .manager-table th,
    .manager-table td {
      padding: 0.8rem;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .manager-table th {
      background: rgba(16, 42, 67, 0.8);
      color: #4fc3f7;
      font-weight: bold;
    }

    .manager-table tr:hover {
      background: rgba(255,255,255,0.05);
    }

    .btn {
      padding: 0.4rem 0.8rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      margin: 0 0.2rem;
    }

    .btn-edit {
      background: #ff9800;
      color: white;
    }
    .btn-delete {
      background: #f44336;
      color: white;
    }

    .btn-add {
      background: #4caf50;
      color: white;
      margin-bottom: 1rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4fc3f7, #29b6f6);
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: rgba(30, 40, 50, 0.9);
      margin: 10% auto;
      padding: 2rem;
      border-radius: 15px;
      width: 400px;
      border: 1px solid rgba(79, 195, 247, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    }

    .modal-header {
      color: #4fc3f7;
      font-size: 1.3rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #b0bec5;
    }

    .form-group input {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 5px;
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .form-group input:focus {
      outline: none;
      border-color: #4fc3f7;
      box-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
    }

    .modal-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
    }

    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .modal-content {
        width: 90%;
        margin: 20% auto;
      }
    }
  </style>
</head>
<body>
<div class="header">
  <h1>ğŸ¨ æ˜Ÿçº§é¥­åº—ç»¼åˆç®¡ç†å¹³å°</h1>
</div>

<div class="container">
  <div class="dashboard-grid">
    <!-- é¥­åº—åŸºç¡€ä¿¡æ¯ -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon">ğŸ¢</div>
        <div class="card-title">é¥­åº—åŸºç¡€ä¿¡æ¯</div>
      </div>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">é¥­åº—åç§°</div>
          <div class="info-value">é»„å±±å›½é™…å¤§é…’åº—</div>
        </div>
        <div class="info-item">
          <div class="info-label">æ˜Ÿçº§è¯„å®š</div>
          <div class="info-value">äº”æ˜Ÿçº§</div>
        </div>
        <div class="info-item">
          <div class="info-label">æœ€å¤§æ¥å¾…é‡</div>
          <div class="info-value">1,200 äºº</div>
        </div>
        <div class="info-item">
          <div class="info-label">åœè½¦ä½æ€»æ•°</div>
          <div class="info-value">580 ä¸ª</div>
        </div>
      </div>
    </div>

    <!-- å®æ—¶å…¥ä½ç‡ -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon">ğŸ“Š</div>
        <div class="card-title">å®æ—¶å…¥ä½ç‡ç›‘æ§</div>
      </div>
      <div class="real-time-data">
        <div class="data-item">
          <div class="data-number" id="occupancy-rate">78.5%</div>
          <div class="data-label">å½“å‰å…¥ä½ç‡</div>
        </div>
        <div class="data-item">
          <div class="data-number" id="occupied-rooms">942</div>
          <div class="data-label">å·²å…¥ä½æˆ¿é—´</div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill" style="width: 78.5%"></div>
      </div>
      <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(25, 35, 45, 0.5); border-radius: 8px; text-align: center;">
        <span class="status-indicator status-warning"></span>
        <span style="color: #ffeb3b; font-weight: bold;">å…¥ä½ç‡è¾ƒé«˜ï¼Œå»ºè®®åˆç†è°ƒé…</span>
      </div>
    </div>

    <!-- è½¦ä½ä½¿ç”¨æƒ…å†µ -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon">ğŸš—</div>
        <div class="card-title">åœè½¦ä½ä½¿ç”¨æƒ…å†µ</div>
      </div>
      <div class="real-time-data">
        <div class="data-item">
          <div class="data-number" id="parking-occupied">423</div>
          <div class="data-label">å·²ä½¿ç”¨è½¦ä½</div>
        </div>
        <div class="data-item">
          <div class="data-number" id="parking-available">157</div>
          <div class="data-label">ç©ºä½™è½¦ä½</div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="parking-progress" style="width: 73%"></div>
      </div>
    </div>

    <!-- é¥­åº—ç®¡ç†å‘˜ä¿¡æ¯ -->
    <div class="card" style="grid-column: 1 / -1;">
      <div class="card-header">
        <div class="card-icon">ğŸ‘¥</div>
        <div class="card-title">é¥­åº—ç®¡ç†å‘˜ä¿¡æ¯</div>
        <button class="btn btn-add" onclick="showAddModal()">â• æ·»åŠ ç®¡ç†å‘˜</button>
      </div>
      <table class="manager-table" id="managerTable">
        <thead>
        <tr>
          <th>å§“å</th>
          <th>èŒä½</th>
          <th>éƒ¨é—¨</th>
          <th>è”ç³»ç”µè¯</th>
          <th>çŠ¶æ€</th>
          <th>æ“ä½œ</th>
        </tr>
        </thead>
        <tbody id="managerTableBody">
        <tr>
          <td>å¼ æ˜</td>
          <td>æ€»ç»ç†</td>
          <td>ç®¡ç†å±‚</td>
          <td>138-0559-8888</td>
          <td><span class="status-indicator status-normal"></span>åœ¨å²—</td>
          <td>
            <button class="btn btn-edit" onclick="editManager(this)">ç¼–è¾‘</button>
            <button class="btn btn-delete" onclick="deleteManager(this)">åˆ é™¤</button>
          </td>
        </tr>
        <tr>
          <td>æå</td>
          <td>å‰å…ç»ç†</td>
          <td>å‰å…éƒ¨</td>
          <td>139-0559-7777</td>
          <td><span class="status-indicator status-normal"></span>åœ¨å²—</td>
          <td>
            <button class="btn btn-edit" onclick="editManager(this)">ç¼–è¾‘</button>
            <button class="btn btn-delete" onclick="deleteManager(this)">åˆ é™¤</button>
          </td>
        </tr>
        <tr>
          <td>ç‹èŠ³</td>
          <td>å®¢æˆ¿ç»ç†</td>
          <td>å®¢æˆ¿éƒ¨</td>
          <td>137-0559-6666</td>
          <td><span class="status-indicator status-warning"></span>ä¼‘å‡</td>
          <td>
            <button class="btn btn-edit" onclick="editManager(this)">ç¼–è¾‘</button>
            <button class="btn btn-delete" onclick="deleteManager(this)">åˆ é™¤</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- æ·»åŠ /ç¼–è¾‘ç®¡ç†å‘˜æ¨¡æ€æ¡† -->
<div id="managerModal" class="modal">
  <div class="modal-content">
    <div class="modal-header" id="modalTitle">æ·»åŠ ç®¡ç†å‘˜</div>
    <form id="managerForm">
      <div class="form-group">
        <label>å§“å</label>
        <input type="text" id="managerName" required>
      </div>
      <div class="form-group">
        <label>èŒä½</label>
        <input type="text" id="managerPosition" required>
      </div>
      <div class="form-group">
        <label>éƒ¨é—¨</label>
        <input type="text" id="managerDepartment" required>
      </div>
      <div class="form-group">
        <label>è”ç³»ç”µè¯</label>
        <input type="tel" id="managerPhone" required>
      </div>
      <div class="form-group">
        <label>çŠ¶æ€</label>
        <select id="managerStatus" style="width: 100%; padding: 0.8rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 5px; background: rgba(255,255,255,0.1); color: white;">
          <option value="normal">åœ¨å²—</option>
          <option value="warning">ä¼‘å‡</option>
          <option value="danger">ç¦»èŒ</option>
        </select>
      </div>
      <div class="modal-buttons">
        <button type="button" class="btn btn-delete" onclick="closeModal()">å–æ¶ˆ</button>
        <button type="submit" class="btn btn-add">ä¿å­˜</button>
      </div>
    </form>
  </div>
</div>

<script>
  // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
  function updateRealTimeData() {
    const occupancyElement = document.getElementById('occupancy-rate');
    const occupiedRoomsElement = document.getElementById('occupied-rooms');
    const parkingOccupiedElement = document.getElementById('parking-occupied');
    const parkingAvailableElement = document.getElementById('parking-available');

    // æ¨¡æ‹Ÿå…¥ä½ç‡å˜åŒ–
    let currentOccupancy = parseFloat(occupancyElement.textContent);
    let change = (Math.random() - 0.5) * 2; // -1 åˆ° 1 ä¹‹é—´
    currentOccupancy += change;
    currentOccupancy = Math.max(0, Math.min(100, currentOccupancy));

    // æ›´æ–°æ˜¾ç¤º
    occupancyElement.textContent = currentOccupancy.toFixed(1) + '%';
    occupiedRoomsElement.textContent = Math.round(1200 * currentOccupancy / 100);

    // æ›´æ–°è¿›åº¦æ¡
    document.getElementById('progress-fill').style.width = currentOccupancy + '%';

    // æ¨¡æ‹Ÿåœè½¦ä½å˜åŒ–
    let parkingOccupied = parseInt(parkingOccupiedElement.textContent);
    let parkingChange = Math.floor(Math.random() * 11) - 5;
    parkingOccupied += parkingChange;
    parkingOccupied = Math.max(0, Math.min(580, parkingOccupied));

    parkingOccupiedElement.textContent = parkingOccupied;
    parkingAvailableElement.textContent = 580 - parkingOccupied;

    // æ›´æ–°åœè½¦ä½è¿›åº¦æ¡
    document.getElementById('parking-progress').style.width = (parkingOccupied / 580 * 100) + '%';

    // æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨
    const statusIndicator = document.querySelector('.status-indicator');
    if (currentOccupancy > 90) {
      statusIndicator.className = 'status-indicator status-danger';
    } else if (currentOccupancy > 80) {
      statusIndicator.className = 'status-indicator status-warning';
    } else {
      statusIndicator.className = 'status-indicator status-normal';
    }
  }

  // ç®¡ç†å‘˜ç®¡ç†åŠŸèƒ½
  let editingRow = null;

  function showAddModal() {
    document.getElementById('managerModal').style.display = 'block';
    document.getElementById('modalTitle').textContent = 'æ·»åŠ ç®¡ç†å‘˜';
    document.getElementById('managerForm').reset();
    editingRow = null;
  }

  function closeModal() {
    document.getElementById('managerModal').style.display = 'none';
    editingRow = null;
  }

  function editManager(btn) {
    const row = btn.closest('tr');
    editingRow = row;

    const cells = row.cells;
    document.getElementById('managerName').value = cells[0].textContent;
    document.getElementById('managerPosition').value = cells[1].textContent;
    document.getElementById('managerDepartment').value = cells[2].textContent;
    document.getElementById('managerPhone').value = cells[3].textContent;

    // è·å–çŠ¶æ€
    const statusSpan = cells[4].querySelector('.status-indicator');
    let status = 'normal';
    if (statusSpan.classList.contains('status-warning')) status = 'warning';
    if (statusSpan.classList.contains('status-danger')) status = 'danger';
    document.getElementById('managerStatus').value = status;

    document.getElementById('modalTitle').textContent = 'ç¼–è¾‘ç®¡ç†å‘˜';
    document.getElementById('managerModal').style.display = 'block';
  }

  function deleteManager(btn) {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä½ç®¡ç†å‘˜å—ï¼Ÿ')) {
      const row = btn.closest('tr');
      row.remove();
    }
  }
  document.getElementById('managerForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const name = document.getElementById('managerName').value;
    const position = document.getElementById('managerPosition').value;
    const department = document.getElementById('managerDepartment').value;
    const phone = document.getElementById('managerPhone').value;
    const status = document.getElementById('managerStatus').value;

    let statusClass = 'status-normal';
    let statusText = 'åœ¨å²—';
    if (status === 'warning') {
      statusClass = 'status-warning';
      statusText = 'ä¼‘å‡';
    } else if (status === 'danger') {
      statusClass = 'status-danger';
      statusText = 'ç¦»èŒ';
    }

    if (editingRow) {
      // ç¼–è¾‘æ¨¡å¼
      const cells = editingRow.cells;
      cells[0].textContent = name;
      cells[1].textContent = position;
      cells[2].textContent = department;
      cells[3].textContent = phone;
      cells[4].innerHTML = `<span class="status-indicator ${statusClass}"></span>${statusText}`;
    } else {
      // æ·»åŠ æ¨¡å¼
      const tbody = document.getElementById('managerTableBody');
      const newRow = tbody.insertRow();
      newRow.innerHTML = `
                    <td>${name}</td>
                    <td>${position}</td>
                    <td>${department}</td>
                    <td>${phone}</td>
                    <td><span class="status-indicator ${statusClass}"></span>${statusText}</td>
                    <td>
                        <button class="btn btn-edit" onclick="editManager(this)">ç¼–è¾‘</button>
                        <button class="btn btn-delete" onclick="deleteManager(this)">åˆ é™¤</button>
                    </td>
                `;
    }

    closeModal();
  });
  // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
  window.onclick = function(event) {
    const modal = document.getElementById('managerModal');
    if (event.target === modal) {
      closeModal();
    }
  }

  // å®šæ—¶æ›´æ–°æ•°æ®
  setInterval(updateRealTimeData, 3000);

  // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
  document.addEventListener('DOMContentLoaded', function() {
    console.log('æ˜Ÿçº§é¥­åº—ç»¼åˆç®¡ç†å¹³å°å·²åŠ è½½');

    // æ·»åŠ ä¸€äº›äº¤äº’æ•ˆæœ
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
      });

      card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
      });
    });
  });
</script>
</body>
</html>